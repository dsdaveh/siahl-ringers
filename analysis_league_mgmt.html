<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.353">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>SIAHL Ringers are Spoiling the Lower Leagues</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="analysis_league_mgmt_files/libs/clipboard/clipboard.min.js"></script>
<script src="analysis_league_mgmt_files/libs/quarto-html/quarto.js"></script>
<script src="analysis_league_mgmt_files/libs/quarto-html/popper.min.js"></script>
<script src="analysis_league_mgmt_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="analysis_league_mgmt_files/libs/quarto-html/anchor.min.js"></script>
<link href="analysis_league_mgmt_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="analysis_league_mgmt_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="analysis_league_mgmt_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="analysis_league_mgmt_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="analysis_league_mgmt_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">SIAHL Ringers are Spoiling the Lower Leagues</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="an-open-letter-to-sharks-ice-adult-hockey-league-management" class="level3">
<h3 class="anchored" data-anchor-id="an-open-letter-to-sharks-ice-adult-hockey-league-management"><strong>An open letter to Sharks Ice Adult Hockey League Management</strong></h3>
<p>The Sharks Ice Adult Hockey League is unquestionably an impressive organization with nearly 2000 active adult players and well over 100 teams. Games are well run, and players at all levels can find a league that suits their level of intensity and ability. The league is also impressively open with the game statistics which make it fun to track individual and team statistics within and across seasons. A fact we’ll take advantage of for this analysis.</p>
<p>As a long time Sharks Ice player, I’ve watch the league (and it’s predecessors) grow over the past 30+ years. As the level of play improves, age catches up with my own skills and I’ve had to drop levels over time in order to remain competitive. Unfortunately, its impossible to miss the fact the lower skilled divisions have a severe and increasing problem with ringers, that is, players whose skill and stamina far exceed the level they are playing in. As in all recreational sports, there are some athletes that prefer to compete below their ability. Reasons can vary, and in some cases, the decision may be justified, but its important to recognize the impact this has on the lower leagues and individual players in them who are wanting to develop their own skills and engage in fair competition.</p>
<p>Why does this matter? Because most of us who enjoy sports, hold the integrity of the match in high regard, and expect the rules, referees and organizers to facilitate a fair match to the best extent possible. It’s important for the health of the league as well, since fair play makes for a better experience for newcomers, ensuring a healthy and growing increase in players.</p>
<p>The bottom line for the league management is clear. By allowing ringers to upset the natural competitive balance within a division, the league risks choking off an important source of future revenue by discouraging those newcomers.</p>
</section>
<section id="is-the-ringer-effect-real" class="level3">
<h3 class="anchored" data-anchor-id="is-the-ringer-effect-real">Is the ringer effect real?</h3>
<p>We can take a look at the public data available at https://stats.sharksice.timetoscore.com/ which shows that the <em>ringer effect</em> not only has significant impact, but that impact increases drastically in the lowers level of play<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>. The chart below shows that a whopping 18% of games in division 8 would have had different outcomes affecting the division standings. This is a conservative estimate, as we’re limiting our definition of ringers to explicit violations of league policy. The chart below shows a clear increase in <em>ringer effect</em> with division-level. It’s worth noting the correlation isn’t perfect since the our ‘ringer’ definition is constrained to policy and the limits of the available data.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="analysis_league_mgmt_files/figure-html/unnamed-chunk-2-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>The remainder of this article explains the methodology behind this conclusion and shows an example of one of the teams whose standings were improved due to the ringers on their roster. We also suggest a straight-forward remedy to help curtail the unsportsmanlike practice of enlisting ringers to influence team’s game outcomes and league rankings.</p>
<p>Let’s start with some simple facts about about the league. This data represents the most recently completed season, <code>Winter 2023</code>.</p>
<table class="table">
<caption>Winter 2023 Season</caption>
<colgroup>
<col style="width: 75%">
<col style="width: 25%">
</colgroup>
<tbody>
<tr class="odd">
<td>Total number of games played across all divisions</td>
<td>1202</td>
</tr>
<tr class="even">
<td>Number of Divisions</td>
<td>16</td>
</tr>
<tr class="odd">
<td>Number of Teams</td>
<td>136</td>
</tr>
<tr class="even">
<td>Number of Players</td>
<td>1882</td>
</tr>
<tr class="odd">
<td>Number of Players who participate on multiple teams</td>
<td>943</td>
</tr>
<tr class="even">
<td>Number of Players who play up or down more than 2 division levels (i.e.&nbsp;Ringers)</td>
<td>127</td>
</tr>
</tbody>
</table>
<p>Let’s break that down a bit further by looking at Division/Levels. For clarity, a Division/Level looks only at the division number, for example 7A and 7B designate 2 separate divisions, but the same Division/Level. There are 9 Division/Levels overall, and we count a ringer as any player who has played a game at least 3 Division/Levels below their highest level. The Ringer/Game Count sums the number of games each player has played as a ringer.</p>
<div class="cell">
<div class="cell-output-display">

<div id="menfsqgixk" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#menfsqgixk table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#menfsqgixk thead, #menfsqgixk tbody, #menfsqgixk tfoot, #menfsqgixk tr, #menfsqgixk td, #menfsqgixk th {
  border-style: none;
}

#menfsqgixk p {
  margin: 0;
  padding: 0;
}

#menfsqgixk .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#menfsqgixk .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#menfsqgixk .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#menfsqgixk .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#menfsqgixk .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#menfsqgixk .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#menfsqgixk .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#menfsqgixk .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#menfsqgixk .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#menfsqgixk .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#menfsqgixk .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#menfsqgixk .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#menfsqgixk .gt_spanner_row {
  border-bottom-style: hidden;
}

#menfsqgixk .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#menfsqgixk .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#menfsqgixk .gt_from_md > :first-child {
  margin-top: 0;
}

#menfsqgixk .gt_from_md > :last-child {
  margin-bottom: 0;
}

#menfsqgixk .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#menfsqgixk .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#menfsqgixk .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#menfsqgixk .gt_row_group_first td {
  border-top-width: 2px;
}

#menfsqgixk .gt_row_group_first th {
  border-top-width: 2px;
}

#menfsqgixk .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#menfsqgixk .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#menfsqgixk .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#menfsqgixk .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#menfsqgixk .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#menfsqgixk .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#menfsqgixk .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#menfsqgixk .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#menfsqgixk .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#menfsqgixk .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#menfsqgixk .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#menfsqgixk .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#menfsqgixk .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#menfsqgixk .gt_left {
  text-align: left;
}

#menfsqgixk .gt_center {
  text-align: center;
}

#menfsqgixk .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#menfsqgixk .gt_font_normal {
  font-weight: normal;
}

#menfsqgixk .gt_font_bold {
  font-weight: bold;
}

#menfsqgixk .gt_font_italic {
  font-style: italic;
}

#menfsqgixk .gt_super {
  font-size: 65%;
}

#menfsqgixk .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#menfsqgixk .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#menfsqgixk .gt_indent_1 {
  text-indent: 5px;
}

#menfsqgixk .gt_indent_2 {
  text-indent: 10px;
}

#menfsqgixk .gt_indent_3 {
  text-indent: 15px;
}

#menfsqgixk .gt_indent_4 {
  text-indent: 20px;
}

#menfsqgixk .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="DivLevel">DivLevel</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Player Count">Player Count</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Ringer Count">Ringer Count</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Ringer/Game Count">Ringer/Game Count</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="DivLevel" class="gt_row gt_right">1</td>
<td headers="Player Count" class="gt_row gt_right">96</td>
<td headers="Ringer Count" class="gt_row gt_right">0</td>
<td headers="Ringer/Game Count" class="gt_row gt_right">0</td></tr>
    <tr><td headers="DivLevel" class="gt_row gt_right">2</td>
<td headers="Player Count" class="gt_row gt_right">71</td>
<td headers="Ringer Count" class="gt_row gt_right">0</td>
<td headers="Ringer/Game Count" class="gt_row gt_right">0</td></tr>
    <tr><td headers="DivLevel" class="gt_row gt_right">3</td>
<td headers="Player Count" class="gt_row gt_right">282</td>
<td headers="Ringer Count" class="gt_row gt_right">0</td>
<td headers="Ringer/Game Count" class="gt_row gt_right">0</td></tr>
    <tr><td headers="DivLevel" class="gt_row gt_right">4</td>
<td headers="Player Count" class="gt_row gt_right">471</td>
<td headers="Ringer Count" class="gt_row gt_right">8</td>
<td headers="Ringer/Game Count" class="gt_row gt_right">35</td></tr>
    <tr><td headers="DivLevel" class="gt_row gt_right">5</td>
<td headers="Player Count" class="gt_row gt_right">483</td>
<td headers="Ringer Count" class="gt_row gt_right">10</td>
<td headers="Ringer/Game Count" class="gt_row gt_right">26</td></tr>
    <tr><td headers="DivLevel" class="gt_row gt_right">6</td>
<td headers="Player Count" class="gt_row gt_right">724</td>
<td headers="Ringer Count" class="gt_row gt_right">31</td>
<td headers="Ringer/Game Count" class="gt_row gt_right">120</td></tr>
    <tr><td headers="DivLevel" class="gt_row gt_right">7</td>
<td headers="Player Count" class="gt_row gt_right">972</td>
<td headers="Ringer Count" class="gt_row gt_right">68</td>
<td headers="Ringer/Game Count" class="gt_row gt_right">226</td></tr>
    <tr><td headers="DivLevel" class="gt_row gt_right">8</td>
<td headers="Player Count" class="gt_row gt_right">573</td>
<td headers="Ringer Count" class="gt_row gt_right">75</td>
<td headers="Ringer/Game Count" class="gt_row gt_right">238</td></tr>
    <tr><td headers="DivLevel" class="gt_row gt_right">9</td>
<td headers="Player Count" class="gt_row gt_right">119</td>
<td headers="Ringer Count" class="gt_row gt_right">13</td>
<td headers="Ringer/Game Count" class="gt_row gt_right">27</td></tr>
  </tbody>
  
  
</table>
</div>
</div>
</div>
<p>There’s a weak correlation (r = -0.035) between the Ringer/Game Count and the team rankings at the end of the season, which would initially imply that the ringers don’t have a major impact on the season outcomes, but a more thorough look tells a different story.</p>
<p>One way to attempt to quantify a ringer impact at the game level, is to look at scoring that involves ringers. That is, if a ringer scores or assists a goal in a game, we can remove that point from the score and compare the adjusted score to the actual final score to see if the outcome is affected. To illustrate, let’s look at <a href="https://stats.sharksice.timetoscore.com/oss-scoresheet?game_id=384789&amp;mode=display">this Division 8A game</a> between the <code>Ice Monkeys</code> and the <code>Irish Car Bombs 4</code> . The final score was 7-3 in favor of the <code>Irish</code> giving them a decided 2 pts<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a> towards their #1 rank for the final season.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="https://stats.sharksice.timetoscore.com/oss-scoresheet?game_id=384789&amp;mode=display"><img src="images/siahl_game_384789.png" class="img-fluid figure-img" alt="Irish Car Bombs 4 vs Ice Monkeys game 384789"></a></p>
<figcaption class="figure-caption">Irish Car Bombs 4 vs Ice Monkeys game 384789</figcaption>
</figure>
</div>
<p>Now let’s take a look at the scoring for the game: It’s arranged here with goals, primary and secondary assists on the left for the visiting team, and on the right for the home team. Goals that involved a player identified as a ringer are highlighted in yellow, and have an asterisk (*) in the <code>adj</code> column.</p>
<div class="cell">
<div class="cell-output-display">

<div id="rnagzrhfyv" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#rnagzrhfyv table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#rnagzrhfyv thead, #rnagzrhfyv tbody, #rnagzrhfyv tfoot, #rnagzrhfyv tr, #rnagzrhfyv td, #rnagzrhfyv th {
  border-style: none;
}

#rnagzrhfyv p {
  margin: 0;
  padding: 0;
}

#rnagzrhfyv .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#rnagzrhfyv .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#rnagzrhfyv .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#rnagzrhfyv .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#rnagzrhfyv .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#rnagzrhfyv .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#rnagzrhfyv .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#rnagzrhfyv .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#rnagzrhfyv .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#rnagzrhfyv .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#rnagzrhfyv .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#rnagzrhfyv .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#rnagzrhfyv .gt_spanner_row {
  border-bottom-style: hidden;
}

#rnagzrhfyv .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#rnagzrhfyv .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#rnagzrhfyv .gt_from_md > :first-child {
  margin-top: 0;
}

#rnagzrhfyv .gt_from_md > :last-child {
  margin-bottom: 0;
}

#rnagzrhfyv .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#rnagzrhfyv .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#rnagzrhfyv .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#rnagzrhfyv .gt_row_group_first td {
  border-top-width: 2px;
}

#rnagzrhfyv .gt_row_group_first th {
  border-top-width: 2px;
}

#rnagzrhfyv .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#rnagzrhfyv .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#rnagzrhfyv .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#rnagzrhfyv .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#rnagzrhfyv .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#rnagzrhfyv .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#rnagzrhfyv .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#rnagzrhfyv .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#rnagzrhfyv .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#rnagzrhfyv .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#rnagzrhfyv .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#rnagzrhfyv .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#rnagzrhfyv .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#rnagzrhfyv .gt_left {
  text-align: left;
}

#rnagzrhfyv .gt_center {
  text-align: center;
}

#rnagzrhfyv .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#rnagzrhfyv .gt_font_normal {
  font-weight: normal;
}

#rnagzrhfyv .gt_font_bold {
  font-weight: bold;
}

#rnagzrhfyv .gt_font_italic {
  font-style: italic;
}

#rnagzrhfyv .gt_super {
  font-size: 65%;
}

#rnagzrhfyv .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#rnagzrhfyv .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#rnagzrhfyv .gt_indent_1 {
  text-indent: 5px;
}

#rnagzrhfyv .gt_indent_2 {
  text-indent: 10px;
}

#rnagzrhfyv .gt_indent_3 {
  text-indent: 15px;
}

#rnagzrhfyv .gt_indent_4 {
  text-indent: 20px;
}

#rnagzrhfyv .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Period">Period</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Time">Time</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="A Goal">A Goal</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="A Asst1">A Asst1</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="A Asst2">A Asst2</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="adj">adj</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="H Goal">H Goal</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="H Asst1">H Asst1</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="H Asst2">H Asst2</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="Period" class="gt_row gt_right">1</td>
<td headers="Time" class="gt_row gt_right">2:56</td>
<td headers="A Goal" class="gt_row gt_right">—</td>
<td headers="A Asst1" class="gt_row gt_right">—</td>
<td headers="A Asst2" class="gt_row gt_right">—</td>
<td headers="adj" class="gt_row gt_right"> </td>
<td headers="H Goal" class="gt_row gt_right">58</td>
<td headers="H Asst1" class="gt_row gt_right">11</td>
<td headers="H Asst2" class="gt_row gt_right">66</td></tr>
    <tr><td headers="Period" class="gt_row gt_right">1</td>
<td headers="Time" class="gt_row gt_right">8:09</td>
<td headers="A Goal" class="gt_row gt_right">—</td>
<td headers="A Asst1" class="gt_row gt_right">—</td>
<td headers="A Asst2" class="gt_row gt_right">—</td>
<td headers="adj" class="gt_row gt_right"> </td>
<td headers="H Goal" class="gt_row gt_right">66</td>
<td headers="H Asst1" class="gt_row gt_right">17</td>
<td headers="H Asst2" class="gt_row gt_right">4</td></tr>
    <tr><td headers="Period" class="gt_row gt_right">1</td>
<td headers="Time" class="gt_row gt_right">10:36</td>
<td headers="A Goal" class="gt_row gt_right">—</td>
<td headers="A Asst1" class="gt_row gt_right">—</td>
<td headers="A Asst2" class="gt_row gt_right">—</td>
<td headers="adj" class="gt_row gt_right"> </td>
<td headers="H Goal" class="gt_row gt_right">5</td>
<td headers="H Asst1" class="gt_row gt_right">88</td>
<td headers="H Asst2" class="gt_row gt_right"></td></tr>
    <tr><td headers="Period" class="gt_row gt_right" style="background-color: #FFFF00;">2</td>
<td headers="Time" class="gt_row gt_right" style="background-color: #FFFF00;">6:31</td>
<td headers="A Goal" class="gt_row gt_right" style="background-color: #FFFF00;">—</td>
<td headers="A Asst1" class="gt_row gt_right" style="background-color: #FFFF00;">—</td>
<td headers="A Asst2" class="gt_row gt_right" style="background-color: #FFFF00;">—</td>
<td headers="adj" class="gt_row gt_right" style="background-color: #FFFF00;">*</td>
<td headers="H Goal" class="gt_row gt_right" style="background-color: #FFFF00;">83</td>
<td headers="H Asst1" class="gt_row gt_right" style="background-color: #FFFF00;">06</td>
<td headers="H Asst2" class="gt_row gt_right" style="background-color: #FFFF00;"></td></tr>
    <tr><td headers="Period" class="gt_row gt_right">2</td>
<td headers="Time" class="gt_row gt_right">7:47</td>
<td headers="A Goal" class="gt_row gt_right">40</td>
<td headers="A Asst1" class="gt_row gt_right">19</td>
<td headers="A Asst2" class="gt_row gt_right">39</td>
<td headers="adj" class="gt_row gt_right"> </td>
<td headers="H Goal" class="gt_row gt_right">—</td>
<td headers="H Asst1" class="gt_row gt_right">—</td>
<td headers="H Asst2" class="gt_row gt_right">—</td></tr>
    <tr><td headers="Period" class="gt_row gt_right" style="background-color: #FFFF00;">2</td>
<td headers="Time" class="gt_row gt_right" style="background-color: #FFFF00;">11:55</td>
<td headers="A Goal" class="gt_row gt_right" style="background-color: #FFFF00;">—</td>
<td headers="A Asst1" class="gt_row gt_right" style="background-color: #FFFF00;">—</td>
<td headers="A Asst2" class="gt_row gt_right" style="background-color: #FFFF00;">—</td>
<td headers="adj" class="gt_row gt_right" style="background-color: #FFFF00;">*</td>
<td headers="H Goal" class="gt_row gt_right" style="background-color: #FFFF00;">06</td>
<td headers="H Asst1" class="gt_row gt_right" style="background-color: #FFFF00;">23</td>
<td headers="H Asst2" class="gt_row gt_right" style="background-color: #FFFF00;"></td></tr>
    <tr><td headers="Period" class="gt_row gt_right" style="background-color: #FFFF00;">2</td>
<td headers="Time" class="gt_row gt_right" style="background-color: #FFFF00;">19:27</td>
<td headers="A Goal" class="gt_row gt_right" style="background-color: #FFFF00;">—</td>
<td headers="A Asst1" class="gt_row gt_right" style="background-color: #FFFF00;">—</td>
<td headers="A Asst2" class="gt_row gt_right" style="background-color: #FFFF00;">—</td>
<td headers="adj" class="gt_row gt_right" style="background-color: #FFFF00;">*</td>
<td headers="H Goal" class="gt_row gt_right" style="background-color: #FFFF00;">06</td>
<td headers="H Asst1" class="gt_row gt_right" style="background-color: #FFFF00;">77</td>
<td headers="H Asst2" class="gt_row gt_right" style="background-color: #FFFF00;">23</td></tr>
    <tr><td headers="Period" class="gt_row gt_right">3</td>
<td headers="Time" class="gt_row gt_right">9:20</td>
<td headers="A Goal" class="gt_row gt_right">86</td>
<td headers="A Asst1" class="gt_row gt_right"></td>
<td headers="A Asst2" class="gt_row gt_right"></td>
<td headers="adj" class="gt_row gt_right"> </td>
<td headers="H Goal" class="gt_row gt_right">—</td>
<td headers="H Asst1" class="gt_row gt_right">—</td>
<td headers="H Asst2" class="gt_row gt_right">—</td></tr>
    <tr><td headers="Period" class="gt_row gt_right" style="background-color: #FFFF00;">3</td>
<td headers="Time" class="gt_row gt_right" style="background-color: #FFFF00;">11:14</td>
<td headers="A Goal" class="gt_row gt_right" style="background-color: #FFFF00;">—</td>
<td headers="A Asst1" class="gt_row gt_right" style="background-color: #FFFF00;">—</td>
<td headers="A Asst2" class="gt_row gt_right" style="background-color: #FFFF00;">—</td>
<td headers="adj" class="gt_row gt_right" style="background-color: #FFFF00;">*</td>
<td headers="H Goal" class="gt_row gt_right" style="background-color: #FFFF00;">06</td>
<td headers="H Asst1" class="gt_row gt_right" style="background-color: #FFFF00;"></td>
<td headers="H Asst2" class="gt_row gt_right" style="background-color: #FFFF00;"></td></tr>
    <tr><td headers="Period" class="gt_row gt_right">3</td>
<td headers="Time" class="gt_row gt_right">19:06</td>
<td headers="A Goal" class="gt_row gt_right">40</td>
<td headers="A Asst1" class="gt_row gt_right">19</td>
<td headers="A Asst2" class="gt_row gt_right"></td>
<td headers="adj" class="gt_row gt_right"> </td>
<td headers="H Goal" class="gt_row gt_right">—</td>
<td headers="H Asst1" class="gt_row gt_right">—</td>
<td headers="H Asst2" class="gt_row gt_right">—</td></tr>
  </tbody>
  
  
</table>
</div>
</div>
</div>
<p>There’s only one ringer playing in this game (jersey #06), but they’ve had quite an effect! Their scoring changed what would otherwise have been a tie into a 4 goal rout.</p>
<p>In the plot below we look at the all the games played by the <code>Irish</code>, and use the adjusted score<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a> to determine whether there was an impact on the standings. For example in the game above, the <code>Irish</code> was awarded 2 points in the standings for the win, versus the 1 point each team would have earned had the game ended in a tie.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="analysis_league_mgmt_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>More comprehensively, we can see how all the teams standings in this division would have changed, if the adjusted score had been the actual score.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="analysis_league_mgmt_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>To be sure, we can’t assume the games could be reasonably adjusted using this method, but instead propose the adjustment as a proxy for measuring one aspect of how ringers affect games. There are certainly other affects at play that would be harder to measure. For example a defenseman playing in a league they are overqualified for is likely to shut down scoring for more novice players, but that impact wouldn’t be directly observable on the score sheet.</p>
</section>
<section id="how-to-address-the-problem" class="level3">
<h3 class="anchored" data-anchor-id="how-to-address-the-problem">How to address the problem</h3>
<p>The league already has a policy against players playing on teams that span more than 2 division levels. Unfortunately, this rule hasn’t been enforced, presumably because it’s difficult to identify the ringers in time to prevent them from playing.</p>
<p>This problem can be easily addressed using an app that scans past and current game rosters to alert captains to potential violations. A proof-of-concept application has been developed for this purpose.</p>
<div class="grid">
<div class="g-col-4">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="https://dsdaveh.shinyapps.io/siahl_ringers/"><img src="images/ringer_app.png" class="img-fluid figure-img"></a></p>
<figcaption class="figure-caption">Mobile friendly Shiny app</figcaption>
</figure>
</div>
</div>
<div class="g-col-8">
<p><span style="color:red;"><em>NOTE</em>: This is app is a preliminary proof-of-concept, and should only be used to get an idea for what is possible.</span></p>
<p>It is best viewed on an iPhone, but a simulation with example game links is available at <a href="https://dsdaveh.github.io/siahl-ringers/" class="uri">https://dsdaveh.github.io/siahl-ringers/</a>. To view the app directly from a mobile device click <a href="https://dsdaveh.shinyapps.io/siahl_ringers/" target="_blank">here</a></p>
<p>To use it, you can enter a Game ID via one of three methods:</p>
<ol type="1">
<li><p>Enter the GameID directly.<br>
These are visible from team pages (eg <a href="https://stats.sharksice.timetoscore.com/display-schedule?team=3329&amp;season=59&amp;league=1&amp;stat_class=1">Choking Hazards-Spring 2023</a>)</p></li>
<li><p>Use the example game dropdown to view one of the games with ringer effects detected.</p></li>
<li><p>Use the team dropdown to select a team.<br>
</p>
<ol type="a">
<li>The dropdown options will repopulate with games specific to that team.<br>
</li>
<li>Select a game from the new dropdown options</li>
</ol></li>
</ol>
<ul>
<li><code>Score</code> is the actual games score</li>
<li><code>Adj* Score</code> is the score if all goals involving ringers were removed</li>
<li><code>Ringers</code> are a list of players who also play on teams in higher skilled (lower numbered) divisions more than 2 from division the current game is being played in</li>
<li>Yellow lines in the score line indicate goals that would be removed for the “adjustment”</li>
</ul>
</div>
</div>
<p>The practical application for this app is to allow captains, at any point in an active game, to protest an opposing player that should be disqualified to play at that level due to being on a team roster more than 3 division-levels removed from the current game.</p>
<p>Putting such a policy in place, would be a great first step to cleansing the league from the affects of players who corrupt the fairness principles inherent to sports, and would encourage novice players who endeavour to learn the great sport of hockey as adults.</p>
<p>By accomplishing this, the Sharks Ice management would affirm their commitment to fair play, and would safeguard a path to both player and franchise fans growth over the future.</p>
</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>Division numbers go up as the level of play goes down. I.e. Division 1 is the most skilled.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>A team earns 2 points for a win, 1 point for a regulation tie, and no points for a loss.<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p>Adjusted score is the score if all goals that involved ringers were removed from the actual final score.<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>